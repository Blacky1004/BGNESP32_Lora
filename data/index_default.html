<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <title>LoRa ESP32</title>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        
    </style>
</head>
<body>
    <nav class="navbar navbar-expand navbar-light bg-light">
        <div class="container px-5">
            <a class="navbar-brand" href="javascript:void(0)">Setup %CHIPID%</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="javascript:void(0)" id="lnkHome" onclick="showDasboard()">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="javascript:void(0)" id="lnkConnections" onclick="showConnections()">Verbindungen</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="javascript:void(0)" id="lnkSensors" onclick="showSensors()">Sensoren</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 align-items-center my-5">
            <div class="col-lg-4">
                <img class="img-fluid rounded mb-4 mb-lg-0" src="logo-buergernetzgeragreiz.png" alt="logo">
            </div>
            <div class="col-lg-8">
                <h1 class="font-weight-light">Bürgernetz Gera-Greiz Feinstaubsensor</h1>
                <p>Hier ne kurze Einführung etc. zum Projekt und wo man sich z.B. bei Problemen hinwenden kann.</p>
            </div>
        </div>
        <div class="card text-white bg-bnetz my-5 py-4 text-center">
            <div class="card-body">
                <p class="text-white m-0">
                    Wichtige Hinweise zu den untenstehenden Einstellungen
                </p>
            </div>
        </div>
        <div class="row gx-4 gx-lg-5" id="pDashboerd">
            <div class="col-lg-4 col-md-12 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Feinstaubdaten</h4>
                        <h6 class="card-subtitle">Anzeige der letzten 10 Messungen</h6>
                        <canvas id="fsdaten"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-12 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Temperaturdaten</h4>
                        <h6 class="card-subtitle">Anzeige der letzten 10 Messungen</h6>
                        <canvas id="tempdaten"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-12 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Standort deines Sensors</h4>
                        <div id="map"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row gx-4 gx-lg-5" id="pConnections">
            <div class="col-md-6 mb-5">
                <div class="card h-100" id="wlansetup">
                    <div class="card-body">
                        <h3 class="card-title">WLAN Einstellungen</h3>
                        <p class="card-text">
                            Möchten Sie auf diesem System Internet über WLAN verenden, weil bspw. kein LoRaWAN zur Verfügung steht, oder
                            Sie dieses System über Remote steuern, so geben Sie bitte hier die entsprechenden Daten für ihren Router ein.
                            Natürlich können Sie auch, wenn verfügbar, Freifunk als WLAN verwenden.
                        </p>
                        <div class="mb-3">
                            <input type="checkbox" class="form-check-input" id="enableWlan" name="enableWlan" checked/>
                            <label for="enableWlan">WLAN aktivieren</label>
                        </div>
                        <div class="mb-3">
                            <label>SSID</label>
                            <select class="form-control" id="ssid" name="ssid">
                                %WIFILIST%
                            </select>
                        </div>
                        <div class="mb-4">
                            <label>WLAN Passwort</label>
                            <input type="password" class="form-control" id="ssidpasw" name="ssidpasw" />
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="mt-4 mt-md-0 ms-auto">
                            <button onclick="checkwifi()" class="btn btn-primary font-weight-medium rounded-pill px-4">Speichern</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-5" >
                <div class="card h-100" id="loraSetup">
                    <form>
                        <div class="card-body">
                            <h3 class="card-title">LoRaWAN Einstellungen</h3>
                            <p class="card-text" id="ltitle"></p>
                            <div class="mb-3">
                                <input type="checkbox" class="form-check-input" id="useLora" name="useLora" checked/>
                                <label for="useLora">LoRaWAN verwenden</label>
                            </div>
                            <div class="mb-3">
                                <label for="nwkskey">NwkSKey</label>
                                <input type="text" class="form-control" id="nwkskey" name="nwkskey" placeholder="00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"/>
                            </div>
                            <div class="mb-3">
                                <label for="appskey">AppSKey</label>
                                <input type="text" class="form-control" id="appskey" name="appskey" placeholder="00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"/>
                            </div>
                            <div class="mb-3">
                                <label for="devaddr">DevAddr</label>
                                <input type="text" class="form-control" id="devaddr" name="devaddr" placeholder="00 00 00 00"/>
                            </div>
                            <div class="mb-3">
                                <p>Sollte der Gateyway ein Single-Gateway sein, so ist hier nur der festeingestellte Kanal 1 zu verwenden.
                                    Die übrigen Kanäle sind zu deaktivieren.
                                </p>
                                <div class="row">
                                    <div class="col-md-3">
                                        <input type="checkbox" id="channel1" class="form-check-input" disabled checked/>
                                        <label>Kanal 1</label>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 2</label>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 3</label>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 4</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 5</label>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 6</label>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 7</label>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="checkbox" class="form-check-input"  checked/>
                                        <label>Kanal 8</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="mt-3 mt-md-0 ms-auto">
                                <button class="btn btn-primary font-weight-medium rounded-pill px-4">Speichern</button>
                            </div>
                        </div>
                    </form>
                </div>                
            </div>
        </div>
        <div class="row gx-4 gx-lg-5" id="pSensors">

        </div>
    </div>
    <footer class="py-5 footer-light">

    </footer>
    <script>        
        function loadMapData() {
            var map = L.map('map').setView([50.844276, 12.0694576],13);
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);
            var circle = L.circle([50.844276, 12.0694576], {
                color: 'red',
                fillColor: '#f03',
                fillOpacity: 0.5,
                radius: 100
            }).addTo(map);
        }
    </script>
    <div class="modal" id="systemRestart">
        <div class="modal-content">
            
        </div>
    </div>
</body>
</html>